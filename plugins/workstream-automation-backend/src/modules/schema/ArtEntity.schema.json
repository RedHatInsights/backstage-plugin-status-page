{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "ArtEntityV1alpha1",
  "description": "ART entity schema to group workstreams",
  "examples": [
    {
      "apiVersion": "workstreams/v1",
      "kind": "ART",
      "metadata": {
        "annotations": {
          "jira/project-key": "PROJECT"
        },
        "name": "lorem-art",
        "title": "Lorem - ART",
        "namespace": "company",
        "createdAt": "timestamp",
        "updatedAt": "timestamp",
        "updatedBy": "user:company/bar",
        "createdBy": "user:company/foo",
        "description": "Some description of ART",
        "links": [
          {
            "url": "mailto://team-devs@company.com",
            "title": "E-Mail",
            "icon": "mail"
          },
          {
            "url": "https://company.slack.com/archives/#573jf23h",
            "title": "Slack",
            "icon": "slack_contact"
          }
        ]
      },
      "spec": {
        "members": [
          {
            "userRef": "user:company/foo",
            "role": "Software Architect"
          },
          {
            "userRef": "user:company/bar",
            "role": "Software Architect"
          }
        ],
        "pillar": "Platform Engineering",
        "workstreams": [
          "workstream:company/ws-1",
          "workstream:company/ws-2",
          "workstream:company/ws-3"
        ],
        "rte": "user:company/baz"
      }
    }
  ],
  "type": "object",
  "required": ["apiVersion", "kind"],
  "allOf": [
    {
      "$ref": "Entity"
    },
    {
      "type": "object",
      "required": ["spec", "metadata"],
      "properties": {
        "apiVersion": {
          "enum": ["workstreams/v1"]
        },
        "kind": {
          "type": "string",
          "description": "The high level entity type being described.",
          "minLength": 1,
          "enum": ["ART"]
        },
        "metadata": {
          "$ref": "EntityMeta",
          "type": "object",
          "properties": {
            "artId": {
              "type": "string",
              "description": "Unique UUID of ART"
            },
            "createdOn": {
              "type": "string",
              "description": "Timestamp when ART was created"
            },
            "updatedOn": {
              "type": "string",
              "description": "Timestamp when last changes were made to ART"
            },
            "createdBy": {
              "type": "string",
              "description": "Entity ref to user who created the ART"
            },
            "updatedBy": {
              "type": "string",
              "description": "Entity ref to user who updated the ART"
            }
          }
        },
        "spec": {
          "type": "object",
          "required": ["members", "workstreams", "rte"],
          "properties": {
            "rte": {
              "anyOf": [
                {
                  "type": "string"
                },
                { "type": "null" }
              ],
              "examples": [null, "user:john", "user:default/john"],
              "description": "Entity ref of user who is lead of the workstream"
            },
            "members": {
              "type": "array",
              "description": "Array of members",
              "items": {
                "type": "object",
                "required": ["userRef", "role"],
                "properties": {
                  "userRef": {
                    "type": "string",
                    "description": "Entity ref of members",
                    "examples": ["emily", "user:emily"]
                  },
                  "role": {
                    "type": "string",
                    "description": "Role of a member in an workstream",
                    "examples": ["Software Architect", "Senior Architect"]
                  }
                }
              }
            },
            "workstreams": {
              "type": "array",
              "description": "workstreams associated with ART",
              "items": {
                "type": "string",
                "description": "entityRef of Workstream",
                "examples": ["workstream:default/ws-1"]
              }
            },
            "pillar": {
              "type": "string",
              "description": "Under which pillar does it come",
              "examples": ["Platform Engineering"]
            }
          }
        }
      }
    }
  ]
}
